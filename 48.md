# 问题

某个图像是n*n的矩阵，如何在不用另一个矩阵的情况下完成直接对二维矩阵的修改。

```
例1：给定 matrix = 
[
  [1,2,3],
  [4,5,6],
  [7,8,9]
],

原地旋转输入矩阵，使其变为:
[
  [7,4,1],
  [8,5,2],
  [9,6,3]
]

例2：
给定 matrix =
[
  [ 5, 1, 9,11],
  [ 2, 4, 8,10],
  [13, 3, 6, 7],
  [15,14,12,16]
], 

原地旋转输入矩阵，使其变为:
[
  [15,13, 2, 5],
  [14, 3, 4, 1],
  [12, 6, 8, 9],
  [16, 7,10,11]
]
```

# 自己的思路

这道题自己的思路是根据一次旋转发现规律，后来在纸上写了很久都没找到规律。还把自己和转置弄混淆了，然后又去扣转置的规律。。。= =

# 正确的思路

经过多次推算，矩阵的同一个元素旋转4次后会回到原来的位置。也就是说这4个元素在旋转的时候位置互换，例如上面例子的矩阵里的2，先是(0,1)，然后是(1,2)，然后是(2,1)，然后是(1,0)。可以发现规律是旋转，可以想象是第四行变成第一行，第一行变为第二行等。

- (i,j)

- (j,N-i-1)

- (N-i-1,N-j-1)

- (N-j-1,i)

  注意：这里，索引需要从0开始，否则运算的时候下标会出现负的情况。

这里的思路就是每次旋转都是4个元素进行位置的互换，使用一个Temp变量作为中间变量，然后针对这4个元素互换即可，也就是说，当n为偶数的时候，可以分为n/4组，当n为奇数的时候，可以分为(n-1)/4组，因为中间的元素是不动的。

**这里对矩阵进行分类讨论，如果n是奇数，则中心元素不随中心元素转移，将剩下的元素分为4块，块，每块元素是[n/2]*[n/2]。*如果n是偶数的话，相当于把矩阵分为四块，每块的元素是(n/2)(n/2)。这个题目求得是90度，因此对一块中的所有元素做一次四元素旋转即可。**

# 代码

```
func rotate(matrix [][]int)  {
    n := len(matrix)  //n=3
    for i:=0;i<n/2;i++{
        for j:=0;j<(n+1)/2;j++{
            temp := matrix[i][j]
            matrix[i][j] = matrix[n-1-j][i]
            matrix[n-1-j][i] = matrix[n-i-1][n-j-1]
            matrix[n-i-1][n-j-1] = matrix[j][n-i-1]
            matrix[j][n-i-1] = temp
        }
    }
}
```

# 思考

回顾这道题目，最大的难度是两点，1.自己没有推出这个递推关系。2.自己对两个for循环中止条件理解不够深。这里的两层循环是为了满足n是奇数和偶数的情况，当n为偶数的时候，需要进行(n/2)*(n/2)次运算。当n为奇数时候每一块是一个长方形，因此需要在第二层加上1，变为(n+1)/2进行运算，这里可以举例当n=3的时候画个图就可以理解。